<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Detector de Riesgos Online | SUPER PIOLA</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Orbitron&display=swap');
  * {
    box-sizing: border-box;
  }
  body, html {
    margin: 0; padding: 0;
    height: 100%;
    overflow: hidden;
    background: #0b0c1a;
    color: #0ff;
    font-family: 'Orbitron', monospace;
    user-select: none;
  }
  #fondo {
    position: fixed;
    top: 0; left: 0;
    width: 100%; height: 100%;
    z-index: 0;
    background: #0b0c1a;
  }
  #app {
    position: relative;
    z-index: 10;
    max-width: 420px;
    margin: 40px auto;
    background: rgba(0,255,255,0.05);
    border: 2px solid #0ff;
    border-radius: 20px;
    padding: 25px;
    box-shadow: 0 0 25px #0ff88;
    text-align: center;
  }
  h1 {
    margin: 0 0 15px;
    font-weight: 900;
    font-size: 2rem;
    text-shadow: 0 0 10px #0ff;
  }
  #mensaje {
    min-height: 140px;
    font-size: 1.2rem;
    line-height: 1.5;
    border-radius: 15px;
    border: 2px solid #0ff;
    padding: 20px;
    margin-bottom: 20px;
    background: rgba(0,255,255,0.1);
    box-shadow: 0 0 15px #0ff;
    transition: background-color 0.5s ease, box-shadow 0.5s ease;
  }
  #mensaje.peligro {
    background: rgba(255,0,50,0.15);
    border-color: #ff0055;
    box-shadow: 0 0 25px #ff0055;
  }
  #mensaje.seguro {
    background: rgba(0,255,50,0.15);
    border-color: #00ff55;
    box-shadow: 0 0 25px #00ff55;
  }
  #botones {
    display: flex;
    justify-content: center;
    gap: 18px;
  }
  button {
    flex: 1;
    background: #0ff;
    border: none;
    border-radius: 12px;
    padding: 14px 0;
    font-size: 1.1rem;
    font-weight: 800;
    color: #022;
    cursor: pointer;
    box-shadow: 0 0 15px #0ff;
    transition: transform 0.2s ease, box-shadow 0.2s ease;
    position: relative;
    overflow: hidden;
  }
  button:hover {
    box-shadow: 0 0 30px #0ff;
    transform: scale(1.1);
  }
  button:active {
    transform: scale(0.95);
  }
  #resultado {
    margin-top: 22px;
    font-size: 1rem;
    min-height: 80px;
    color: #0ff;
    user-select: text;
    text-shadow: 0 0 8px #0ffaa;
  }
  #contador {
    margin-top: 10px;
    font-size: 0.9rem;
    color: #44ffee;
  }
  /* Confeti */
  #confeti-canvas {
    position: fixed;
    top: 0; left: 0;
    width: 100%; height: 100%;
    pointer-events: none;
    z-index: 15;
  }
</style>
</head>
<body>
<canvas id="fondo"></canvas>
<canvas id="confeti-canvas"></canvas>

<div id="app" role="main" aria-live="polite" aria-atomic="true">
  <h1>Detector de Riesgos Online</h1>
  <div id="mensaje">Preparado para detectar se√±ales sospechosas?</div>
  <div id="botones">
    <button id="btnSeguro" aria-label="Marcar como Seguro">Seguro ‚úÖ</button>
    <button id="btnPeligro" aria-label="Marcar como Peligro">Peligro ‚ö†Ô∏è</button>
  </div>
  <div id="resultado" aria-live="assertive" aria-atomic="true"></div>
  <div id="contador"></div>
</div>

<script>
  // Fondo animado con l√≠neas ne√≥n
  const canvasFondo = document.getElementById("fondo");
  const ctxFondo = canvasFondo.getContext("2d");
  let w, h;
  function resizeFondo() {
    w = window.innerWidth;
    h = window.innerHeight;
    canvasFondo.width = w;
    canvasFondo.height = h;
  }
  resizeFondo();
  window.addEventListener("resize", resizeFondo);

  const lineas = [];
  const NUM_LINEAS = 30;
  for(let i=0; i<NUM_LINEAS; i++) {
    lineas.push({
      x: Math.random()*w,
      y: Math.random()*h,
      dx: (Math.random()-0.5)*0.8,
      dy: (Math.random()-0.5)*0.8,
      length: 100 + Math.random()*100,
      angle: Math.random()*Math.PI*2,
      speed: 0.01 + Math.random()*0.02
    });
  }

  function dibujarFondo() {
    ctxFondo.clearRect(0,0,w,h);
    ctxFondo.strokeStyle = "#0ff";
    ctxFondo.lineWidth = 1.3;
    ctxFondo.shadowColor = "#0ff";
    ctxFondo.shadowBlur = 6;

    for(let l of lineas) {
      l.angle += l.speed;
      const x2 = l.x + Math.cos(l.angle)*l.length;
      const y2 = l.y + Math.sin(l.angle)*l.length;
      ctxFondo.beginPath();
      ctxFondo.moveTo(l.x, l.y);
      ctxFondo.lineTo(x2, y2);
      ctxFondo.stroke();

      l.x += l.dx;
      l.y += l.dy;
      if(l.x<0 || l.x>w) l.dx*=-1;
      if(l.y<0 || l.y>h) l.dy*=-1;
    }
  }

  // Confeti para celebrar puntaje alto
  const confetiCanvas = document.getElementById("confeti-canvas");
  const confettiCtx = confetiCanvas.getContext("2d");
  confetiCanvas.width = w;
  confetiCanvas.height = h;

  const confettis = [];
  const COLORS = ['#0ff','#0f0','#f0f','#ff0','#f00','#0f9'];

  function crearConfetti() {
    for(let i=0; i<150; i++) {
      confettis.push({
        x: Math.random()*w,
        y: Math.random()*h,
        r: Math.random()*6 + 4,
        dx: (Math.random()-0.5)*3,
        dy: Math.random()*3 + 2,
        color: COLORS[Math.floor(Math.random()*COLORS.length)],
        rot: Math.random()*360,
        dRot: (Math.random()-0.5)*10,
        alpha: 1
      });
    }
  }

  function animarConfetti() {
    confettiCtx.clearRect(0, 0, w, h);
    for(let i = confettis.length -1; i >=0; i--) {
      let c = confettis[i];
      c.x += c.dx;
      c.y += c.dy;
      c.rot += c.dRot;
      c.alpha -= 0.01;
      if(c.alpha <= 0 || c.y > h) confettis.splice(i,1);
      else {
        confettiCtx.save();
        confettiCtx.globalAlpha = c.alpha;
        confettiCtx.translate(c.x, c.y);
        confettiCtx.rotate(c.rot * Math.PI/180);
        confettiCtx.fillStyle = c.color;
        confettiCtx.fillRect(-c.r/2, -c.r/2, c.r, c.r);
        confettiCtx.restore();
      }
    }
  }

  // Juego y l√≥gica
  const mensajes = [
    { texto: "Un usuario desconocido te pide fotos personales.", esPeligro: true, explicacion: "Nunca compartas fotos con desconocidos. Puede ser peligroso." },
    { texto: "Te ofrecen un premio si compart√≠s tu direcci√≥n y tel√©fono.", esPeligro: true, explicacion: "Ofrecer premios para obtener datos personales es una t√©cnica de enga√±o." },
    { texto: "Alguien te pregunta tu edad y escuela.", esPeligro: true, explicacion: "No des informaci√≥n personal a extra√±os en internet." },
    { texto: "Un amigo te env√≠a un meme divertido.", esPeligro: false, explicacion: "Compartir memes con amigos es normal y seguro." },
    { texto: "Un contacto conocido te invita a un grupo cerrado de tu inter√©s.", esPeligro: false, explicacion: "Participar en grupos con gente que conoc√©s suele ser seguro." },
    { texto: "Te env√≠an un link sospechoso para 'ver fotos' exclusivas.", esPeligro: true, explicacion: "No hagas clic en enlaces sospechosos, pueden robar tus datos." },
    { texto: "Alguien te pregunta si quieres hacer un 'juego secreto'.", esPeligro: true, explicacion: "Los juegos secretos pueden ser trampas para manipularte." },
    { texto: "Recib√≠s un mensaje de tu profesor con tareas y avisos.", esPeligro: false, explicacion: "Comunicaci√≥n escolar oficial es generalmente segura." },
  ];

  let indice = 0;
  let puntaje = 0;
  const mensajeDiv = document.getElementById("mensaje");
  const resultadoDiv = document.getElementById("resultado");
  const contadorDiv = document.getElementById("contador");
  const btnSeguro = document.getElementById("btnSeguro");
  const btnPeligro = document.getElementById("btnPeligro");

  function mostrarMensaje() {
    const m = mensajes[indice];
    mensajeDiv.textContent = m.texto;
    mensajeDiv.className = "";
    resultadoDiv.textContent = "";
    contadorDiv.textContent = `Mensaje ${indice + 1} de ${mensajes.length}`;
  }

  function procesarRespuesta(esPeligroUsuario) {
    const m = mensajes[indice];
    if (esPeligroUsuario === m.esPeligro) {
      resultadoDiv.style.color = "#0f0";
      resultadoDiv.textContent = "¬°Correcto! " + m.explicacion + " üéâ";
      puntaje++;
      mensajeDiv.className = m.esPeligro ? "peligro" : "seguro";
      pulso(m.esPeligro ? '#ff0055' : '#00ff55');
    } else {
      resultadoDiv.style.color = "#f00";
      resultadoDiv.textContent = "Cuidado! " + m.explicacion + " ‚ö†Ô∏è";
      mensajeDiv.className = "peligro";
      pulso('#ff0033');
    }
    indice++;
    if (indice >= mensajes.length) {
      terminarJuego();
    } else {
      setTimeout(() => {
        mostrarMensaje();
        resultadoDiv.textContent = "";
        mensajeDiv.className = "";
      }, 2800);
    }
  }

  function terminarJuego() {
    mensajeDiv.textContent = "Juego terminado!";
    mensajeDiv.className = "";
    resultadoDiv.innerHTML = `<strong>Tu puntaje: ${puntaje} / ${mensajes.length}</strong><br>
      ${puntaje >= mensajes.length * 0.7 
        ? "¬°Genial! Sab√©s c√≥mo detectar riesgos online. üëè"
        : "Te recomendamos aprender m√°s sobre seguridad en internet. üí°"}`;

    btnSeguro.disabled = true;
    btnPeligro.disabled = true;
    contadorDiv.textContent = "";

    if (puntaje >= mensajes.length * 0.7) {
      crearConfetti();
    }
  }

  function pulso(color) {
    mensajeDiv.style.boxShadow = `0 0 30px 8px ${color}`;
    setTimeout(() => {
      mensajeDiv.style.boxShadow = "";
    }, 600);
  }

  btnSeguro.onclick = () => procesarRespuesta(false);
  btnPeligro.onclick = () => procesarRespuesta(true);

  mostrarMensaje();

  // Animaci√≥n fondo y confeti
  function loop() {
    dibujarFondo();
    animarConfetti();
    requestAnimationFrame(loop);
  }
  loop();

  // Ajustar canvas confeti si cambia tama√±o
  window.addEventListener('resize', () => {
    resizeFondo();
    confetiCanvas.width = w;
    confetiCanvas.height = h;
  });
</script>

</body>
</html>
